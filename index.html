<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Embedded C++ Serial Communication Library: Embedded Serial Communicaton Library for C++</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Embedded C++ Serial Communication Library
   &#160;<span id="projectnumber">1</span>
   </div>
   <div id="projectbrief">A custom C++ serial communication library for easy configuration and implementation of serial communication protocols.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Embedded Serial Communicaton Library for C++ </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="md_SerialLibraryExample_serial_controllers_MAINPAGE"></a> Library for serial communication in C++ using various APIs and hardware for use in Microchip Studio projects.</p>
<h1><a class="anchor" id="autotoc_md1"></a>
Current APIs</h1>
<p>1) <a class="el" href="namespace_serial_u_a_r_t.html" title="UART controller global namespace.">SerialUART</a><br  />
 2) <a class="el" href="namespace_serial_u_s_b.html" title="USB Controller global namespace.">SerialUSB</a> (CDC) using tinyUSB<br  />
 3) <a class="el" href="namespace_serial_s_p_i.html" title="SPI controller global namespace.">SerialSPI</a><br  />
</p>
<h1><a class="anchor" id="autotoc_md2"></a>
Additional Utilities</h1>
<p>1) GENERIC_BUFFER (a C++ ring buffer template)<br  />
2) <a class="el" href="namespace_serial.html" title="Serial Buffer global namespace.">Serial</a> (integer to ASCII function and char buffer with advanced parsing features)</p>
<h1><a class="anchor" id="autotoc_md3"></a>
Current Hardware</h1>
<p>1) SAMD21 Series ARM Microcontroller</p>
<h1><a class="anchor" id="autotoc_md4"></a>
How To Use</h1>
<p>1) Setup project for desired hardware.<br  />
 2) In your C and C++ compilers, add ../serial_controllers to the include path.<br  />
 3) Open <a class="el" href="serial__comm__config_8h_source.html">serial_comm_config.h</a>, and define the SERCOM_MCU_OPT macro to your desired hardware (refer to <a class="el" href="serial__comm__options_8h_source.html">serial_comm_options.h</a> for all defined hardware).<br  />
 4) Define the SERCOM_MODULE_OPT as all desired protocols for your project (OPT_SERCOM_UART | OPT_SERCOM_SPI | OPT_SERCOM_USB defines all protocols).<br  />
 5) include <a class="el" href="serial__communication_8h_source.html">serial_communication.h</a> in your project to use serial protocols.<br  />
 6) Initialize hardware clocks.<br  />
 7) Initialize and implement all ISRs to ensure proper functionality!<br  />
</p>
<h1><a class="anchor" id="autotoc_md5"></a>
Serial USB Code Setup Example</h1>
<div class="fragment"><div class="line">#include &quot;serial_communication.h&quot;</div>
<div class="line">...</div>
<div class="line">char usb_buf[USB_DEFAULT_FIFO_SIZE];            //call outside of function calls so variable stays active</div>
<div class="line">SerialUSB::USBController usb_controller;</div>
<div class="line">...</div>
<div class="line">usb_controller.Init(usb_buf, sizeof(usb_buf));      //call after clock setup (this will set clock to 48 MHz)</div>
<div class="line">usb_controller.Task();                      //must be called often, preferrably inside of any smaller loop or blocking function</div>
<div class="line">...</div>
<div class="line">void USB_Handler()                      //use the proper ISR Handler according to your hardware!</div>
<div class="line">{</div>
<div class="line">    usb_controller.ISR();   </div>
<div class="line">}</div>
</div><!-- fragment --><p><em>NOTE: Call USBController.Task() in every loop in your main program so USB communication works. USBController.Task() can also be used to flash received data onto serial terminal by passing true into Task parameters.</em></p>
<h2><a class="anchor" id="autotoc_md6"></a>
USB Descriptors for compatibility in host applications</h2>
<ul>
<li>VID: 0xCafe</li>
<li>PID: 0x4001</li>
<li>BCD: 0x0200</li>
</ul>
<h1><a class="anchor" id="autotoc_md7"></a>
Serial UART Code Setup Example</h1>
<div class="fragment"><div class="line">#include &quot;serial_communication.h&quot;</div>
<div class="line">...</div>
<div class="line">char rx_buf[DEFAULT_RX_BUFFER_SIZE];</div>
<div class="line">char tx_buf[DEFAULT_TX_BUFFER_SIZE];</div>
<div class="line">SerialUART::UARTController uart_controller;</div>
<div class="line">...</div>
<div class="line">UARTHAL::Peripheral uart_peripheral;</div>
<div class="line">UARTHAL::GetPeripheralDefaults(&amp;uart_peripheral);                               //Can also call hardware specific peripheral initalizing functions or manually initialize peripheral </div>
<div class="line">uart_controller.Init(&amp;uart_peripheral, tx_buf, sizeof(tx_buf), rx_buf, sizeof(rx_buf));     //call after clock setup</div>
<div class="line">uart_controller.EnableErrorIRQ();                                           //optional IRQ setups</div>
<div class="line">...</div>
<div class="line">void SERCOM0_Handler()                                                  //use the proper ISR Handler according to your hardware!</div>
<div class="line">{</div>
<div class="line">    uart_controller.ISR();</div>
<div class="line">    //uart_controller.EchoRx();                                         //call EchoRx() to debug by flashing all received characters onto terminal, exclude for actual use</div>
<div class="line">}</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md8"></a>
Serial SPI Code Setup Example</h1>
<div class="fragment"><div class="line">#include &quot;serial_communication.h&quot;</div>
<div class="line">...</div>
<div class="line">char miso_buf[DEFAULT_MISO_BUFFER_SIZE];</div>
<div class="line">char mosi_buf[DEFAULT_MOSI_BUFFER_SIZE];</div>
<div class="line">SerialSPI::SPIController spi_controller;</div>
<div class="line">...</div>
<div class="line">SPIHAL::Peripheral spi_peripheral;</div>
<div class="line">SPIHAL::GetPeripheralDefaults(&amp;spi_peripheral);                                     //Can also call hardware specific peripheral initalizing functions or manually initialize peripheral </div>
<div class="line">spi_controller.Init(&amp;spi_peripheral, mosi_buf, sizeof(mosi_buf), miso_buf, sizeof(miso_buf));       //call after clock setup</div>
<div class="line">spi_controller.EnableErrorIRQ();                                                //optional IRQ setups</div>
<div class="line">...</div>
<div class="line">void SERCOM4_Handler()                                                      //use the proper ISR Handler according to your hardware!</div>
<div class="line">{</div>
<div class="line">    spi_controller.ISR();</div>
<div class="line">    //spi_controller.EchoMISO();                                                //call EchoMISO() to debug by flashing all received characters onto terminal, exclude for actual use</div>
<div class="line">}</div>
</div><!-- fragment --><p><em>NOTE: you will primarily call SPIController.SPIHostProcedure() when transmitting opcodes to SPI client, refer to doxygen docs to learn more about its usage.</em> </p>
</div></div><!-- PageDoc -->
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
